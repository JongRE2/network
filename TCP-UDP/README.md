## TCP프로토콜 ( IP프로토콜의 한계를 해결방안으로 나온 프로토콜)

#### 배경 지식

인터넷 프로토콜 스택의 4계층

![image-20211202235759788](C:.\images\ip4layer) 

애플리케이션 계층 = APP에서 사용하는 계층 = APP에서 사용하는 프로토콜들 (웹서비스를 할때 쓰는 프로토콜이 http프로토콜이다.)

<img src="C:.\images\http" alt="image-20211203002150067" style="zoom:33%;" /> 

네트워크 인터페이스 계층 = 랜카드, 랜드라이버 등등을 포함한 네트워크 인터페이스 계층

#### ※ 위 처럼 4개의 계층으로 구분되지만 우리가 컴퓨터를 사용할때 와닿는 부분은 아래그림처럼 3개 정도밖에 안될것이다.

![image-20211203000045642](C:.\images\layer1) 

![image-20211203001651721](C:.\images\layer2) 

소켓라이브러리를 통해서 OS가 있는 해당계층에다가 메시지에 해당하는 "hello"내용의 데이터를 넘긴다. 

그러면 이 OS계층에서 'hello'라는 메시지에다가 TCP정보를 하나 캡슐화하게 된다. (TCP패킷까지 완성)

![image-20211203024943861](C:.\images\packet1) 

이렇게 감싸고 IP계층으로 내려와서 IP와 관련된 데이터를 가지는 IP프로토콜내용을 또 씌운다. (IP패킷까지 완성)

![image-20211203025050289](C:.\images\packet2) 

이제, 이 IP패킷은 결국 네트워크 인터페이스에 있는 LAN카드를 통해서 나갈때 'Ethernet Frame'이라는걸 포함해서 나가게 된다. 참고로 'Ethernet Frame'은 랜카드에 등록된 MAC주소 이런 내용을 한번쯤은 들어봤을텐데 실제 이런 물리적인 내용까지 다루면 네트워크내용의 너무 깊게까지 들어가기때문에 우리는 웹을 공부하는데에 IP프로토콜까지만 깊게 이해하면 되기때문에 다루지 않고 넘어가겠다.



참고> 패킷? 패키지 + 버킷(덩어리)

![image-20211203033207579](C:.\images\tcpippacket) 

ip패킷안에, tcp와 관련된 정보가 들어간다. ip만으로 해결이 안됐던 전송제어, 순서 등의 문제가 해결이 된다.



### TCP의 역할, 특징

: 전송 제어(Transmission Control) 프로토콜(Protocol)

+ 연결지향 - TCP 3 way handshake (가상연결) : 목적지가 제대로 존재하는지,연결할 수 있는지 ACK를 받아서 확인을 받고 연결이 진행된다.
+ 데이터 전달 보증
+ 순서 보장
+ 신뢰할 수 있는 프로토콜
+ 현재는 대부분 TCP사용







